@using Microsoft.AspNetCore.Mvc.Localization;
@using Microsoft.Extensions.Localization
@inject IViewLocalizer Localizer;
@model IEnumerable<PrintSoftWeb.Models.CostOfBorrowingModel>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Credit Rating";
}
<head>
    <link href="~/css/main.css" rel="stylesheet" />
    <style type="text/css">
        .table100 {
            border: 0px !important;
        }
    </style>
</head>
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <div class="row">
            <div class="col-lg-6">
                <h4 class="m-0 font-weight-bold text-primary">@Localizer["Cost Of Borrowing"]</h4>
            </div>

        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-lg-4">
                        <label for="name" class="form-label float-lg-end">@Localizer["Period"]:<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-8">
                        <input type="text" class="form-control" maxlength="100" id="cob_period" placeholder="@Localizer["Enter Period"]" name="name">
                        <input type="text" class="form-control d-none" id="cob_id" name="name">

                    </div>
                </div>
            </div>
            <div class="col-lg-2">
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-lg-4">
                        <label for="name" class="form-label float-lg-end">@Localizer["Finantial Year"]:<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-8">
                        <input type="text" maxlength="100" class="form-control" id="cob_finantialyear" placeholder="@Localizer["Enter Finantial Year"]" name="name">
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-lg-4">
                        <label for="name" class="form-label float-lg-end">@Localizer["Average COB(Including NCDs)"]:<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-8">
                        <input type="text" maxlength="100" class="form-control" id="cob_includingncd" placeholder="@Localizer["Enter Cost Of Borrowing"]" name="name">
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-lg-4">
                        <label for="name" class="form-label float-lg-end">@Localizer["Marginal COB(Excluding NCDs)"]:<span class="text-danger">*</span></label>
                    </div>
                    <div class="col-lg-8">
                        <input type="text" maxlength="100" class="form-control" id="cob_excludingncd" placeholder="@Localizer["Enter Cost Of Borrowing"]" name="name">
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
            </div>
        </div>

    </div>
    <div class="card-footer">
        <div class="row">
            <div class="col-lg-10">
                <div class="row">
                    <div class="col-lg-4">
                    </div>
                    <div class="col-lg-8">
                        <button class="btn btn-success" onclick="submitrating()" type="button">@Localizer["Save"]</button>
                        <button class="btn btn-secondary ml-2" onclick="clearrating()" type="button">@Localizer["Clear"]</button>
                    </div>
                </div>
            </div>
            <div class="col-lg-2">
            </div>
        </div>

    </div>
</div>
<div class="card shadow mb-4">
    <!--Start Header -->
    <div class="card-header py-3">
        <div class="row align-items-center justify-content-end">
            <div class="col-auto d-flex flex-wrap toggle">
                <div class="justify-content-lg-end justify-content-md-end justify-content-center mt-lg-0 mt-md-0 mt-3">
                    <input type="text" id="custom-search" class="form-control" placeholder=@Localizer["Search"] />
                </div>

            </div>
        </div>
    </div>
    <div class="card-body">

        <div class="table100 ver2 m-b-110">

            <table class="table table-bordered" id="dataTable1" width="100%" cellspacing="0" data-vertable="ver2">
                <thead>
                    <tr class="row100 head">
                        <th>Sr.No.</th>
                        <th class="d-none"></th>
                        <th>Period</th>
                        <th>Finantial Year</th>
                        <th>Average COB(Including NCDs)</th>
                        <th>Marginal COB(Excluding NCDs)</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>

                    @{


                        int no = 1;
                    }
                    @foreach (var item in Model)
                    {

                        <tr class="align-items-center row100">
                            <td>
                                @no
                            </td>
                            <td class="d-none"> </td>
                            <td> @Html.DisplayFor(modelItem => item.cob_period)</td>
                            <td> @Html.DisplayFor(modelItem => item.cob_finantialyear)</td>
                            <td> @Html.DisplayFor(modelItem => item.cob_includingncd)</td>
                            <td> @Html.DisplayFor(modelItem => item.cob_excludingncd)</td>
                            <td>
                                <div class="d-inline-flex">
                                    <a class='editicon text-primary' title="Edit" onclick="editLinkClick('@item.cob_id','@item.cob_period','@item.cob_finantialyear','@item.cob_includingncd','@item.cob_excludingncd')"> <span class='fas fa-edit'></span></a>
                                    <a href="@Url.Action("Delete", new { cob_id = @item.cob_id })" onclick="return confirm('Are you sure you want to delete?')" class='deleteicon text-danger' title="Delete"> <span class='fa fa-trash ml-2'></span></a>
                                </div>
                            </td>
                        </tr>
                        no++;

                    }
                </tbody>
            </table>
        </div>

        <!-- start Pagination-->
        <div class="row mt-3">
            <div class="col-lg-5 col-md-5 col-12 ">
                <div class="row ">
                    <div class="col-lg-3 col-md-3 col-12 d-flex justify-content-lg-start justify-content-md-start justify-content-center ">
                        <h6 class="mt-2">@Localizer["Show"]</h6>&nbsp;&nbsp;
                        <select name="table_id_length" id="table_length_select" aria-controls="table_id" class="form-select w-auto">
                            <option value="10">10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                        &nbsp;&nbsp;
                        <h6 class="mt-2">@Localizer["entries"]</h6>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-2"></div>
            <div class="col-lg-5 col-md-5 col-12 mt-lg-0 mt-md-0 mt-3">
                <nav aria-label="Page navigation example">
                    <div id="table_id_length">

                        <div id="custom-pagination" class=" d-flex text-center text-lg-end justify-content-end  text-end float-end">
                            <ul class="pagination justify-content-lg-end justify-content-md-end justify-content-center">
                                <li class="page-item disabled">
                                    <button class="page-link" href="#" aria-label="Previous" data-page="0"> <span aria-hidden="true">&laquo;</span></button>
                                </li>
                                <li class="page-item active"><button class="page-link" href="#" data-page="1">1</button></li>

                                <li class="page-item "><button class="page-link" href="#" data-page="2" aria-label="Next">  <span aria-hidden="true">&raquo;</span></button></li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</div>
<script>
    function editLinkClick(cob_id, cob_period, cob_finantialyear, cob_includingncd, cob_excludingncd) {
        $("#cob_id").val(cob_id);
        $("#cob_period").val(cob_period);
        $("#cob_finantialyear").val(cob_finantialyear);
        $("#cob_includingncd").val(cob_includingncd);
        $("#cob_excludingncd").val(cob_excludingncd);
    }
    function clearrating() {
        $("#cob_id").val("");
        $("#cob_period").val("");
        $("#cob_finantialyear").val("");
        $("#cob_includingncd").val("");
        $("#cob_excludingncd").val("");
    }
    function submitrating() {
        if ($("#cob_period").val() == "") {
            alert("Please Enter Period!");
            return false;
        } else if ($("#cob_finantialyear").val() == "") {
            alert("Please Enter Finantial Year!");
            return false;
        } else if ($("#cob_includingncd").val() == "") {
            alert("Please Enter COB Including NCDs!");
            return false;
        } else if ($("#cob_excludingncd").val() == "") {
            alert("Please Enter COB Excluding NCDs!");
            return false;
        }
        var data = {
            cob_id: $("#cob_id").val(),
            cob_period: $("#cob_period").val(),
            cob_finantialyear: $("#cob_finantialyear").val(),
            cob_includingncd: $("#cob_includingncd").val(),
            cob_excludingncd: $("#cob_excludingncd").val()
        };
        $.ajax({
            type: 'POST',
            url: "CostOfBorrowing/Create", // Use the form's action attribute
            data: data, // Serialize the form data
            success: function (response) {
                window.location.reload();
            },
            error: function (xhr, status, error) {
                window.location.reload();
            }
        });
    }
    myFunction();
    $('#table_length_select').change();
</script>

